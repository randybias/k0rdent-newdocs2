
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for k0rdent.">
      
      
        <meta name="author" content="Mirantis, Inc.">
      
      
      
        <link rel="prev" href="../quickstart_2_Azure/">
      
      
      
      <link rel="icon" href="../img/k0s_social.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>k0rdent installation - Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Documentation" class="md-header__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../img/k0s_social.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              k0rdent installation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/k0rdent/kcm" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Documentation" class="md-nav__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../img/k0s_social.png" alt="logo">

    </a>
    Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k0rdent/kcm" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to the k0rdent docs
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide_to_k0rdent_documentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guide to k0rdent documentation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    k0rdent concepts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            k0rdent concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../why_k0rdent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why k0rdent?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../k0rdent_architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    k0rdent architecture
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    QuickStarts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            QuickStarts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide_to_quickstarts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guide to Quickstarts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart_1_management_node_and_cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Set up Management Node and Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart_2_AWS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configure and Deploy to AWS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart_2_Azure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configure and Deploy to Azure
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Administrator Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Administrator Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    k0rdent installation
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    k0rdent installation
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-management-cluster-server" class="md-nav__link">
    <span class="md-ellipsis">
      Create the management cluster server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-and-prepare-a-kubernetes-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Create and prepare a Kubernetes cluster
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-k0rdent" class="md-nav__link">
    <span class="md-ellipsis">
      Install k0rdent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Install k0rdent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#air-gapped-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Air-gapped Installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managed-cluster-target-platforms" class="md-nav__link">
    <span class="md-ellipsis">
      Managed Cluster Target Platforms
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Managed Cluster Target Platforms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aws" class="md-nav__link">
    <span class="md-ellipsis">
      AWS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure" class="md-nav__link">
    <span class="md-ellipsis">
      Azure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openstack" class="md-nav__link">
    <span class="md-ellipsis">
      OpenStack
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vsphere" class="md-nav__link">
    <span class="md-ellipsis">
      VSphere
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#finding-releases" class="md-nav__link">
    <span class="md-ellipsis">
      Finding Releases
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extended-management-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Extended Management Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extended Management Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cleanup_1" class="md-nav__link">
    <span class="md-ellipsis">
      Cleanup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-management-cluster-server" class="md-nav__link">
    <span class="md-ellipsis">
      Create the management cluster server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-and-prepare-a-kubernetes-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Create and prepare a Kubernetes cluster
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-k0rdent" class="md-nav__link">
    <span class="md-ellipsis">
      Install k0rdent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Install k0rdent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#air-gapped-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Air-gapped Installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managed-cluster-target-platforms" class="md-nav__link">
    <span class="md-ellipsis">
      Managed Cluster Target Platforms
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Managed Cluster Target Platforms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aws" class="md-nav__link">
    <span class="md-ellipsis">
      AWS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure" class="md-nav__link">
    <span class="md-ellipsis">
      Azure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openstack" class="md-nav__link">
    <span class="md-ellipsis">
      OpenStack
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vsphere" class="md-nav__link">
    <span class="md-ellipsis">
      VSphere
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#finding-releases" class="md-nav__link">
    <span class="md-ellipsis">
      Finding Releases
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extended-management-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Extended Management Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extended Management Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cleanup_1" class="md-nav__link">
    <span class="md-ellipsis">
      Cleanup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">#</a></h1>
<p>k0rdent installation is pretty straightforward. As discussed in Architecture, k0rdent runs in a management Kubernetes cluster, so installation involves creating that cluster and adding k0rdent to it. Creating managed clusters is handled by k0rdent itself. This section of the guide covers:</p>
<ul>
<li>Creating the management cluster</li>
<li>Preparing k0rdent to create managed clusters on multiple providers</li>
<li>Creating and destroying managed clusters</li>
<li>Creating, testing, and approving cluster templates for use by others</li>
<li>Creating, testing, and approving service templates for use by others</li>
<li>Extended management configuration</li>
<li>Upgrading k0rdent</li>
</ul>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">#</a></h2>
<p>Before you can install k0rdent, you'll need to create the substrate in which it will run.</p>
<h3 id="create-the-management-cluster-server">Create the management cluster server<a class="headerlink" href="#create-the-management-cluster-server" title="Permanent link">#</a></h3>
<p>The k0rdent management cluster can run on a single Ubuntu server. Where that server resides isn't important, as long as it can reach the providers on which you want to run managed clusters. For example, you can run k0rdent in a management cluster on a VMware VM, and use it to create clusters on AWS, Azure, and so on. This platform independence makes it easier to manage multi-cloud installations. You can even run the management cluster on a (suitably performant) laptop.</p>
<p>What's more, while the management cluster can perform operations on the managed clusters, these managed clusters are essentially independent of it. Once they've been created, they are simply Kubernetes clusters; if the Management Cluster goes away, they will continue to function unimpeded.</p>
<p>For example, you can create and configure a series of edge clusters, then shut down the management cluster until you need to make changes at the edge.</p>
<p>The management cluster server should meet the following minimum requirements:</p>
<p>[[[[ INSERT MINIMUM REQUIREMENTS HERE. Include kubectl and Helm. ]]]]</p>
<p>Once this server is in place, move on to creating the actual management cluster.</p>
<h3 id="create-and-prepare-a-kubernetes-cluster">Create and prepare a Kubernetes cluster<a class="headerlink" href="#create-and-prepare-a-kubernetes-cluster" title="Permanent link">#</a></h3>
<p>If you already have a Kubernetes cluster into which you want to install k0rdent, skip to the next step. Otherwise, follow these steps to install and prepare the management cluster:</p>
<ol>
<li>
<p>Install Docker</p>
<p>Kubernetes, of course, requires Docker. You can find the <a href="https://docs.docker.com/engine/install/ubuntu/" title="Docker installation instructions">full instructions for installing Docker</a> at the Docker site, but here's a simplified version. </p>
<p>First uninstall older, potentially conflicting versions:</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="w"> </span>pkg<span class="w"> </span><span class="k">in</span><span class="w"> </span>docker.io<span class="w"> </span>docker-doc<span class="w"> </span>docker-compose<span class="w"> </span>docker-compose-v2<span class="w"> </span>podman-docker<span class="w"> </span>containerd<span class="w"> </span>runc<span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>remove<span class="w"> </span><span class="nv">$pkg</span><span class="p">;</span><span class="w"> </span><span class="k">done</span>
</code></pre></div>
<p>Then use the Docker convenience script to deploy Docker:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-fsSL<span class="w"> </span>https://get.docker.com<span class="w"> </span>-o<span class="w"> </span>get-docker.sh
sudo<span class="w"> </span>sh<span class="w"> </span>get-docker.sh
</code></pre></div>
<p>It's not necessary to prepare Docker for non-root usage.</p>
</li>
<li>
<p>Deploy a Kubernetes cluster</p>
<p>The next step is to create the actual cluster itself. Note that the actual distribution used for the management cluster isn't important, as long as it's a CNCF-compliant distribution. That means you can use an existing EKS cluster, or whatever is your normal corporate standard. To make things simple this guide uses k0s, a small, convenient, and fully-functional distribution:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>--proto<span class="w"> </span><span class="s1">&#39;=https&#39;</span><span class="w"> </span>--tlsv1.2<span class="w"> </span>-sSf<span class="w"> </span>https://get.k0s.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>sh
sudo<span class="w"> </span>k0s<span class="w"> </span>install<span class="w"> </span>controller<span class="w"> </span>--single
sudo<span class="w"> </span>k0s<span class="w"> </span>start
</code></pre></div>
<p>k0s includes its own preconfigured version of <code>kubectl</code> so make sure the cluster is running:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>k0s<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>nodes
</code></pre></div>
<p>You should see a single node with a status of <code>Ready</code>, as in:</p>
<div class="highlight"><pre><span></span><code>NAME<span class="w">              </span>STATUS<span class="w">   </span>ROLES<span class="w">    </span>AGE<span class="w">   </span>VERSION
ip-172-31-29-61<span class="w">   </span>Ready<span class="w">    </span>&lt;none&gt;<span class="w">   </span>46s<span class="w">   </span>v1.31.2+k0s
</code></pre></div>
</li>
<li>
<p>Install kubectl</p>
<p>Everything you do in k0rdent is done by creating and manipulating Kubernetes objects, so you'll need to have <code>kubectl</code> installed:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>apt-transport-https<span class="w"> </span>ca-certificates<span class="w"> </span>curl<span class="w"> </span>gnupg
curl<span class="w"> </span>-fsSL<span class="w"> </span>https://pkgs.k8s.io/core:/stable:/v1.31/deb/Release.key<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>gpg<span class="w"> </span>--dearmor<span class="w"> </span>-o<span class="w"> </span>/etc/apt/keyrings/kubernetes-apt-keyring.gpg
sudo<span class="w"> </span>chmod<span class="w"> </span><span class="m">644</span><span class="w"> </span>/etc/apt/keyrings/kubernetes-apt-keyring.gpg<span class="w"> </span><span class="c1"># allow unprivileged APT programs to read this keyring</span>
<span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.31/deb/ /&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/kubernetes.list
sudo<span class="w"> </span>chmod<span class="w"> </span><span class="m">644</span><span class="w"> </span>/etc/apt/sources.list.d/kubernetes.list<span class="w">   </span><span class="c1"># helps tools such as command-not-found to work correctly</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>kubectl
</code></pre></div>
</li>
<li>
<p>Get the kubeconfig</p>
<p>In order to access the management cluster you will, of course, need the kubeconfig. Again, if you're using another Kubernetes distribution follow those instructions to get the kubeconfig, but for k0s, the process involves simply copying the existing file and adding it to an environment varable so <code>kubectl</code> knows where to find it.</p>
<p><div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>cp<span class="w"> </span>/var/lib/k0s/pki/admin.conf<span class="w"> </span>KUBECONFIG
sudo<span class="w"> </span>chmod<span class="w"> </span>+r<span class="w"> </span>KUBECONFIG
<span class="nb">export</span><span class="w"> </span><span class="nv">KUBECONFIG</span><span class="o">=</span>./KUBECONFIG
</code></pre></div>
Now you should be able to use the non-k0s <code>kubectl</code> to see the status of the cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>nodes
</code></pre></div>
<p>Again, you should see the single k0s node, but by this time it should have had its role assigned, as in:</p>
<div class="highlight"><pre><span></span><code><span class="go">NAME              STATUS   ROLES           AGE   VERSION</span>
<span class="go">ip-172-31-29-61   Ready    control-plane   25m   v1.31.2+k0s</span>
</code></pre></div>
<p>Now the cluster is ready for installation, which we'll do using Helm.</p>
</li>
<li>
<p>Install Helm</p>
<p>The easiest way to install k0rdent is through its Helm chart, so let's get Helm installed:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-fsSL<span class="w"> </span>-o<span class="w"> </span>get_helm.sh<span class="w"> </span>https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
chmod<span class="w"> </span><span class="m">700</span><span class="w"> </span>get_helm.sh
./get_helm.sh
</code></pre></div>
<p>Helm will be installed into <code>/usr/local/bin/helm</code>.</p>
</li>
</ol>
<h2 id="install-k0rdent">Install k0rdent<a class="headerlink" href="#install-k0rdent" title="Permanent link">#</a></h2>
<p>The actual management cluster is a Kubernetes cluster with the k0rdent application installed. The simplest way to install k0rdent is through its Helm chart:</p>
<p><div class="highlight"><pre><span></span><code>helm<span class="w"> </span>install<span class="w"> </span>kcm<span class="w"> </span>oci://ghcr.io/k0rdent/kcm/charts/kcm<span class="w"> </span>--version<span class="w"> </span><span class="m">0</span>.0.7<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>--create-namespace
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: ./KUBECONFIG</span>
<span class="go">WARNING: Kubernetes configuration file is world-readable. This is insecure. Location: ./KUBECONFIG</span>
<span class="go">Pulled: ghcr.io/mirantis/hmc/charts/hmc:0.0.3</span>
<span class="go">Digest: sha256:1f75e8e55c44d10381d7b539454c63b751f9a2ec6c663e2ab118d34c5a21087f</span>
<span class="go">NAME: hmc</span>
<span class="go">LAST DEPLOYED: Mon Dec  9 00:32:14 2024</span>
<span class="go">NAMESPACE: hmc-system</span>
<span class="go">STATUS: deployed</span>
<span class="go">REVISION: 1</span>
<span class="go">TEST SUITE: None</span>
</code></pre></div></p>
<p>While the installation process appears to be done at this point, it's not; multiple pods and templates are being created in the background, and the entire process takes a few minutes.  </p>
<p>To understand whether installation is complete, start by making sure all pods are ready in the <code>kcm-system</code> namespace. There should be 15:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAME                                                           READY   STATUS</span>
<span class="go">azureserviceoperator-controller-manager-86d566cdbc-rqkt9       1/1     Running</span>
<span class="go">capa-controller-manager-7cd699df45-28hth                       1/1     Running</span>
<span class="go">capi-controller-manager-6bc5fc5f88-hd8pv                       1/1     Running</span>
<span class="go">capv-controller-manager-bb5ff9bd5-7dsr9                        1/1     Running</span>
<span class="go">capz-controller-manager-5dd988768-qjdbl                        1/1     Running</span>
<span class="go">helm-controller-76f675f6b7-4d47l                               1/1     Running</span>
<span class="go">kcm-cert-manager-7c8bd964b4-nhxnq                              1/1     Running</span>
<span class="go">kcm-cert-manager-cainjector-56476c46f9-xvqhh                   1/1     Running</span>
<span class="go">kcm-cert-manager-webhook-69d7fccf68-s46w8                      1/1     Running</span>
<span class="go">kcm-cluster-api-operator-79459d8575-2s9jc                      1/1     Running</span>
<span class="go">kcm-controller-manager-64869d9f9d-zktgw                        1/1     Running</span>
<span class="go">k0smotron-controller-manager-bootstrap-6c5f6c7884-d2fqs        2/2     Running</span>
<span class="go">k0smotron-controller-manager-control-plane-857b8bffd4-zxkx2    2/2     Running</span>
<span class="go">k0smotron-controller-manager-infrastructure-7f77f55675-tv8vb   2/2     Running</span>
<span class="go">source-controller-5f648d6f5d-7mhz5                             1/1     Running</span>
</code></pre></div></p>
<p>State management is handled by Project Sveltos, so you'll want to make sure that all 9 pods are running in the <code>projectsveltos</code> namespace:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>projectsveltos
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAME                                     READY   STATUS    RESTARTS   AGE</span>
<span class="go">access-manager-cd49cffc9-c4q97           1/1     Running   0          16m</span>
<span class="go">addon-controller-64c7f69796-whw25        1/1     Running   0          16m</span>
<span class="go">classifier-manager-574c9d794d-j8852      1/1     Running   0          16m</span>
<span class="go">conversion-webhook-5d78b6c648-p6pxd      1/1     Running   0          16m</span>
<span class="go">event-manager-6df545b4d7-mbjh5           1/1     Running   0          16m</span>
<span class="go">hc-manager-7b749c57d-5phkb               1/1     Running   0          16m</span>
<span class="go">sc-manager-f5797c4f8-ptmvh               1/1     Running   0          16m</span>
<span class="go">shard-controller-767975966-v5qqn         1/1     Running   0          16m</span>
<span class="go">sveltos-agent-manager-56bbf5fb94-9lskd   1/1     Running   0          15m</span>
</code></pre></div></p>
<p>If any of these pods are missing, simply give k0rdent more time. If there's a problem, you'll see pods crashing and restarting, and you can review the logs at [[[ ADD LOG LOCATION HERE ]]]. As long as that's not happening, you just need to wait a few minutes.</p>
<p>Next verify whether the kcm templates have been successfully installed and reconciled.  Start with the <code>ProviderTemplate</code> objects:</p>
<p>[[[ ADD ACTUAL VERSION NUMBERS TO THE OUTPUT ]]]</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>providertemplate<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAME                                 VALID</span>
<span class="go">cluster-api-X-Y-Z                    true</span>
<span class="go">cluster-api-provider-aws-X-Y-Z       true</span>
<span class="go">cluster-api-provider-azure-X-Y-Z     true</span>
<span class="go">cluster-api-provider-vsphere-X-Y-Z   true</span>
<span class="go">kcm-X-Y-Z                            true</span>
<span class="go">k0smotron-X-Y-Z                      true</span>
<span class="go">projectsveltos-X-Y-Z                 true</span>
</code></pre></div></p>
<p>Make sure that all templates are not just installed, but valid. Again, this may take a few minutes.</p>
<p>You'll also want to make sure the <code>ClusterTemplate</code> objects are installed and valid:</p>
<p>[[[ ADD ACTUAL VERSION NUMBERS TO THE OUTPUT ]]]</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>clustertemplate<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAME                                VALID</span>
<span class="go">aws-eks-X-Y-Z                       true</span>
<span class="go">aws-hosted-cp-X-Y-Z                 true</span>
<span class="go">aws-standalone-cp-X-Y-Z             true</span>
<span class="go">azure-hosted-cp-X-Y-Z               true</span>
<span class="go">azure-standalone-cp-X-Y-Z           true</span>
<span class="go">vsphere-hosted-cp-X-Y-Z             true</span>
<span class="go">vsphere-standalone-cp-X-Y-Z         true</span>
</code></pre></div></p>
<p>Finally, make sure the <code>ServiceTemplate</code> objects are installed and valid:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>servicetemplate<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAME                      VALID</span>
<span class="go">cert-manager-1-16-2       true</span>
<span class="go">dex-0-19-1                true</span>
<span class="go">external-secrets-0-11-0   true</span>
<span class="go">ingress-nginx-4-11-0      true</span>
<span class="go">ingress-nginx-4-11-3      true</span>
<span class="go">kyverno-3-2-6             true</span>
<span class="go">velero-8-1-0              true</span>
</code></pre></div></p>
<h3 id="air-gapped-installation">Air-gapped Installation<a class="headerlink" href="#air-gapped-installation" title="Permanent link">#</a></h3>
<blockquote>
<p>WARNING:
Currently only the vSphere infrastructure provider supports full air-gapped
installation.</p>
</blockquote>
<h4 id="prerequisites_1">Prerequisites<a class="headerlink" href="#prerequisites_1" title="Permanent link">#</a></h4>
<p>In order to install k0rdent in an air-gapped environment, you need will need the
following:</p>
<ul>
<li>A k0s cluster installed on vSphere. This cluster will act as the management cluster. (While k0rdent works with any certified Kubernetes distribution, k0s implements an OCI image bundle watcher that enables k0s to easily utilize a bundle of management cluster images. You can follow the <a href="https://docs.k0sproject.io/head/airgap-install/#airgap-install">Airgapped Installation</a> documentation to create this cluster if necessary.</li>
<li>The <code>KUBECONFIG</code> of the management cluster.</li>
<li>
<p>A registry that is accessible from the airgapped hosts in which to store the k0rdent images. If you don't have a registry, you can deploy a <a href="https://distribution.github.io/distribution/">local Docker registry</a> or use <a href="https://github.com/mesosphere/mindthegap?tab=readme-ov-file#serving-a-bundle-supports-both-image-or-helm-chart">mindthegap</a> to provide one.</p>
<blockquote>
<p>WARNING:
If using a local Docker registry, ensure the registry URL is added to
the <code>insecure-registries</code> key within the Docker <code>/etc/docker/daemon.json</code>
file, as in:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;insecure-registries&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;&lt;registry-url&gt;&quot;</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></p>
</blockquote>
</li>
<li>
<p>A registry and associated chart repository for hosting kcm charts.  At this
  time, all k0rdent charts MUST be hosted in a single OCI chart repository.  See
  <a href="https://helm.sh/docs/topics/registries/">Use OCI-based registries</a> in the
  Helm documentation for more information.</p>
</li>
<li><a href="https://jqlang.github.io/jq/download/">jq</a>, Helm and Docker binaries installed on the machine from which the <code>airgap-push.sh</code> script (see below) will run. [[[ THIS IS THE SAME MACHINE WHERE THE CLUSTER IS RUNNING, NO? ]]]</li>
</ul>
<h4 id="installation_1">Installation<a class="headerlink" href="#installation_1" title="Permanent link">#</a></h4>
<ol>
<li>
<p>Download the kcm airgap bundle from [[[ INSERT URL HERE ]]]. This bundle contains:</p>
<ul>
<li><code>images/kcm-images-&lt;version&gt;.tgz</code> - The image bundle tarball for the
  management cluster. This bundle is loaded into the management
  cluster.</li>
<li><code>images/kcm-extension-images-&lt;version&gt;.tgz</code> - The image bundle tarball for
  the managed clusters. This bundle will be pushed to a registry where the
  images can be accessed by managed clusters when deployed.</li>
<li><code>charts</code> - Contains the kcm Helm chart, dependency charts and k0s
  extensions charts within the <code>extensions</code> directory.  All of these charts
  get pushed to a chart repository within a registry.</li>
<li><code>scripts/airgap-push.sh</code> - A script that will aid in re-tagging and
  pushing the <code>ClusterDeployment</code> required charts and images to a desired
  registry.</li>
</ul>
</li>
<li>
<p>Log into the container and chart registries:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>login
helm<span class="w"> </span>registry<span class="w"> </span>login
</code></pre></div>
</li>
<li>
<p>Extract and use the <code>airgap-push.sh</code> script to push the <code>extensions</code> images
   and <code>charts</code> contents to the registry:  </p>
<div class="highlight"><pre><span></span><code>tar<span class="w"> </span>xvf<span class="w"> </span>kcm-airgap-&lt;version&gt;.tgz<span class="w"> </span>scripts/airgap-push.sh
./scripts/airgap-push.sh<span class="w"> </span>-r<span class="w"> </span>&lt;registry&gt;<span class="w"> </span>-c<span class="w"> </span>&lt;chart-repo&gt;<span class="w"> </span>-a<span class="w"> </span>kcm-airgap-&lt;version&gt;.tgz
</code></pre></div>
</li>
<li>
<p>Extract the <code>management</code> bundle tarball and sync the images to the
   target k0s management cluster.  See <a href="https://docs.k0sproject.io/head/airgap-install/#2a-sync-the-bundle-file-with-the-airgapped-machine-locally">Sync the Bundle File</a>
   for more information.</p>
<blockquote>
<p>NOTE:
Multiple image bundles can be placed in the <code>/var/lib/k0s/images</code>
directory for k0s to use; you don't need to merge the existing <code>k0s</code> airgap bundle
into the <code>kcm-images-&lt;version&gt;.tgz</code> bundle.</p>
</blockquote>
<div class="highlight"><pre><span></span><code>tar<span class="w"> </span>-C<span class="w"> </span>/var/lib/k0s<span class="w"> </span>-xvf<span class="w"> </span>kcm-airgap-&lt;version&gt;.tgz<span class="w"> </span><span class="s2">&quot;images/kcm-images-&lt;version&gt;.tgz&quot;</span>
</code></pre></div>
</li>
<li>
<p>At this point the chart registry includes the k0rdent kcm charts. The kcm controller image is loaded as part of the airgap <code>management</code> bundle and does not need to be customized within the Helm chart, but the default chart repository configured via <code>controller.defaultRegistryURL</code> should be set to reference the repository:</p>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>install<span class="w"> </span>kcm<span class="w"> </span>oci://&lt;chart-repository&gt;/kcm<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--version<span class="w"> </span>&lt;version&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-n<span class="w"> </span>kcm-system<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--create-namespace<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>controller.defaultRegistryURL<span class="o">=</span>oci://&lt;chart-repository&gt;
</code></pre></div>
</li>
<li>
<p>Edit the <code>Management</code> object to add the airgap parameters.</p>
<p>The resulting yaml should look like this:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Management</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">core</span><span class="p">:</span>
<span class="w">    </span><span class="nt">capi</span><span class="p">:</span>
<span class="w">      </span><span class="nt">config</span><span class="p">:</span>
<span class="w">        </span><span class="nt">airgap</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">kcm</span><span class="p">:</span>
<span class="w">      </span><span class="nt">config</span><span class="p">:</span>
<span class="w">        </span><span class="nt">controller</span><span class="p">:</span>
<span class="w">          </span><span class="nt">defaultRegistryURL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">oci://&lt;registry-url&gt;</span>
<span class="w">          </span><span class="nt">insecureRegistry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">providers</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">config</span><span class="p">:</span>
<span class="w">      </span><span class="nt">airgap</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0smotron</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">config</span><span class="p">:</span>
<span class="w">      </span><span class="nt">airgap</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster-api-provider-vsphere</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">projectsveltos</span>
<span class="w">  </span><span class="nt">release</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;release name&gt;</span>
</code></pre></div>
<blockquote>
<p>NOTE:
Use the <code>insecureRegistry</code> parameter only if you have a plain HTTP (rather than HTTPS)
registry.</p>
</blockquote>
</li>
<li>
<p>k0s components must be downloaded at each node upon creation. To make them available, you can either place the k0s binary and airgap bundle on an internal server so they are available over HTTP, or make them available as a Kubernetes <code>Deployment</code> as follows:</p>
<blockquote>
<p>NOTE:
k0s image version is the same that the default defined in the vSphere
template. [[[ NOT SURE WHAT THIS SENTENCE MEANS ]]]</p>
</blockquote>
</li>
</ol>
<p><div class="highlight"><pre><span></span><code><span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0s-ag-image</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0s-ag-image</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span>
<span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0s-ag-image</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span>
<span class="w">    </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0s-ag-image</span>
<span class="w">    </span><span class="nt">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nt">containers</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0s-ag-image</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0s-ag-image:v1.31.1-k0s.1</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">ports</span><span class="p p-Indicator">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0s-ag-image</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
<span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">    </span><span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TCP</span>
<span class="w">    </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">  </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0s-ag-image</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NodePort</span>
</code></pre></div>
    [[[ EXPLAIN WHAT IS GOING ON HERE ]]]</p>
<h4 id="creation-of-the-clusterdeployment">Creation of the ClusterDeployment<a class="headerlink" href="#creation-of-the-clusterdeployment" title="Permanent link">#</a></h4>
<p>The last step is to make sure that <code>ClusterDeployment</code>s have access to the Kubernetes bundle. To do that, you need to add additional information to the <code>.spec.config</code> of the <code>ClusterDeployment</code> object.</p>
<p>Specifically, you need to specify the custom image registry and chart repository to be used. These are the same URLs to which you pushed the <code>extensions</code> bundle and charts earlier. Finally, provide the endpoint where the k0s binary and airgap bundle can be downloaded, as you specified in step 7 of the <a href="#installation">installation procedure</a>):</p>
<div class="highlight"><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
<span class="w"> </span><span class="nt">config</span><span class="p">:</span>
<span class="w">   </span><span class="nt">airgap</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">   </span><span class="nt">k0s</span><span class="p">:</span>
<span class="w">     </span><span class="nt">downloadURL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://&lt;k0s</span><span class="nv"> </span><span class="s">binary</span><span class="nv"> </span><span class="s">endpoint&gt;/k0s&quot;</span>
<span class="w">     </span><span class="nt">bundleURL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://&lt;k0s</span><span class="nv"> </span><span class="s">binary</span><span class="nv"> </span><span class="s">endpoint&gt;/k0s-airgap-bundle&quot;</span>
<span class="w">   </span><span class="nt">extensions</span><span class="p">:</span>
<span class="w">    </span><span class="nt">imageRepository</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${IMAGE_REPOSITORY}</span>
<span class="w">    </span><span class="nt">chartRepository</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${CHART_REPOSITORY}</span>
</code></pre></div>
<h2 id="managed-cluster-target-platforms">Managed Cluster Target Platforms<a class="headerlink" href="#managed-cluster-target-platforms" title="Permanent link">#</a></h2>
<p>Managed clusters can be hosted on a number of different platforms. At the time of this writing, those platforms include:</p>
<ul>
<li>Amazon Web Services</li>
<li>Microsoft Azure</li>
<li>OpenStack</li>
<li>VMware</li>
</ul>
<h3 id="aws">AWS<a class="headerlink" href="#aws" title="Permanent link">#</a></h3>
<p>k0rdent is able to deploy managed clusters as both EC2-based Kubernetes clusters and EKS clusters. In both cases, you'll need to create the relevant credentials, and to do that you'll need to configure an IAM user. Follow these steps to make it possible to deploy to AWS:</p>
<ol>
<li>
<p>Install k0rdent</p>
<p>Follow the instructions in [[[ add link ]]] Install k0rdent to create a management cluster with k0rdent running.</p>
</li>
<li>
<p>Install <code>clusterawsadm</code></p>
<p>k0rdent uses the Cluster API (CAPI) to marshal clouds and infrastructures. For AWS, this means using the components from the Cluster API Provider AWS (CAPA) project. clusterawsadm, a CLI tool created by CAPA project, helps with AWS-specific tasks such as creating IAM roles and policies, as well as credential configuration. To install clusterawsadm on Ubuntu on x86 hardware, execute these commands:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-LO<span class="w"> </span>https://github.com/kubernetes-sigs/cluster-api-provider-aws/releases/download/v2.7.1/clusterawsadm-linux-amd64
sudo<span class="w"> </span>install<span class="w"> </span>-o<span class="w"> </span>root<span class="w"> </span>-g<span class="w"> </span>root<span class="w"> </span>-m<span class="w"> </span><span class="m">0755</span><span class="w"> </span>clusterawsadm-linux-amd64<span class="w"> </span>/usr/local/bin/clusterawsadm
</code></pre></div>
</li>
<li>
<p>Configure AWS IAM</p>
<p>Next you'll need to create the IAM policies and service account k0rdent will use to take action within the AWS infrastructure. (Note that you only need to do this once.)</p>
<p>The first step is to crete the IAM CloudFormation stack based on your admin user. Start by specifying the environment variables clusterawsadmin will use as AWS credentials:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">AWS_REGION</span><span class="o">=</span>&lt;aws-region&gt;
<span class="nb">export</span><span class="w"> </span><span class="nv">AWS_ACCESS_KEY_ID</span><span class="o">=</span>&lt;admin-user-access-key&gt;
<span class="nb">export</span><span class="w"> </span><span class="nv">AWS_SECRET_ACCESS_KEY</span><span class="o">=</span>&lt;admin-user-secret-access-key&gt;
<span class="nb">export</span><span class="w"> </span><span class="nv">AWS_SESSION_TOKEN</span><span class="o">=</span>&lt;session-token&gt;<span class="w"> </span><span class="c1"># Optional. If you are using Multi-Factor Auth.</span>
</code></pre></div>
</li>
<li>
<p>Create the IAM CloudFormation </p>
<p>Now use clusterawsadm to create the IAM CloudFormation stack:</p>
<div class="highlight"><pre><span></span><code>clusterawsadm<span class="w"> </span>bootstrap<span class="w"> </span>iam<span class="w"> </span>create-cloudformation-stack
</code></pre></div>
</li>
<li>
<p>Install the AWS CLI</p>
<p>With the stack in place you can create the AWS IAM user. You can do this in the UI, but it's also possible to do it from the command line using the aws CLI tool.  Start by installing it, if you haven't already:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>unzip
curl<span class="w"> </span><span class="s2">&quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot;</span><span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;awscliv2.zip&quot;</span><span class="w"> </span>
unzip<span class="w"> </span>awscliv2.zip<span class="w"> </span>
sudo<span class="w"> </span>./aws/install
</code></pre></div>
<p>The tool recognizes the environment variables you created earlier, so there's no need to login.</p>
</li>
<li>
<p>Create the IAM user. </p>
<p>The actual <code>user-name</code> parameter is arbitrary; you can specify it as anything you like:</p>
<p><div class="highlight"><pre><span></span><code>aws<span class="w"> </span>iam<span class="w"> </span>create-user<span class="w"> </span>--user-name<span class="w"> </span>k0rdentQuickstart
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">{</span>
<span class="go">  &quot;User&quot;: {</span>
<span class="go">      &quot;Path&quot;: &quot;/&quot;,</span>
<span class="go">      &quot;UserName&quot;: &quot;k0rdentQuickstart&quot;,</span>
<span class="go">      &quot;UserId&quot;: &quot;AIDA2XXXXXXXXXXXXXXXX&quot;,</span>
<span class="go">      &quot;Arn&quot;: &quot;arn:aws:iam::743175908171:user/k0rdentQuickstart&quot;,</span>
<span class="go">      &quot;CreateDate&quot;: &quot;2025-01-18T08:15:27+00:00&quot;</span>
<span class="go">  }</span>
<span class="go">}</span>
</code></pre></div></p>
</li>
<li>
<p>Assign the relevant policies</p>
<p>You'll need to assign the following policies to the user you just created:</p>
<p><div class="highlight"><pre><span></span><code>control-plane.cluster-api-provider-aws.sigs.k8s.io
controllers.cluster-api-provider-aws.sigs.k8s.io
nodes.cluster-api-provider-aws.sigs.k8s.io
</code></pre></div>
To do that, you'll need the ARNs for each policy.  You can get them with the <code>list-policies</code> command, as in:</p>
<p><div class="highlight"><pre><span></span><code>aws<span class="w"> </span>iam<span class="w"> </span>list-policies<span class="w"> </span>--scope<span class="w"> </span>Local
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">{</span>
<span class="go">  &quot;Policies&quot;: [</span>
<span class="go">      {</span>
<span class="go">          &quot;PolicyName&quot;: &quot;controllers-eks.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">          &quot;PolicyId&quot;: &quot;ANPA22CF4NNF3VUDTMH3N&quot;,</span>
<span class="go">          &quot;Arn&quot;: &quot;arn:aws:iam::743175908171:policy/controllers-eks.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">          &quot;Path&quot;: &quot;/&quot;,</span>
<span class="go">          &quot;DefaultVersionId&quot;: &quot;v1&quot;,</span>
<span class="go">          &quot;AttachmentCount&quot;: 2,</span>
<span class="go">          &quot;PermissionsBoundaryUsageCount&quot;: 0,</span>
<span class="go">          &quot;IsAttachable&quot;: true,</span>
<span class="go">          &quot;CreateDate&quot;: &quot;2025-01-01T18:47:43+00:00&quot;,</span>
<span class="go">          &quot;UpdateDate&quot;: &quot;2025-01-01T18:47:43+00:00&quot;</span>
<span class="go">      },</span>
<span class="go">      {</span>
<span class="go">          &quot;PolicyName&quot;: &quot;nodes.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">          &quot;PolicyId&quot;: &quot;ANPA22CF4NNF5TAKL44PU&quot;,</span>
<span class="go">          &quot;Arn&quot;: &quot;arn:aws:iam::743175908171:policy/nodes.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">          &quot;Path&quot;: &quot;/&quot;,</span>
<span class="go">          &quot;DefaultVersionId&quot;: &quot;v1&quot;,</span>
<span class="go">          &quot;AttachmentCount&quot;: 3,</span>
<span class="go">          &quot;PermissionsBoundaryUsageCount&quot;: 0,</span>
<span class="go">          &quot;IsAttachable&quot;: true,</span>
<span class="go">          &quot;CreateDate&quot;: &quot;2025-01-01T18:47:44+00:00&quot;,</span>
<span class="go">          &quot;UpdateDate&quot;: &quot;2025-01-01T18:47:44+00:00&quot;</span>
<span class="go">      },</span>
<span class="go">      {</span>
<span class="go">          &quot;PolicyName&quot;: &quot;controllers.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">          &quot;PolicyId&quot;: &quot;ANPA22CF4NNFVO6OHIQOE&quot;,</span>
<span class="go">          &quot;Arn&quot;: &quot;arn:aws:iam::743175908171:policy/controllers.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">          &quot;Path&quot;: &quot;/&quot;,</span>
<span class="go">          &quot;DefaultVersionId&quot;: &quot;v1&quot;,</span>
<span class="go">          &quot;AttachmentCount&quot;: 3,</span>
<span class="go">          &quot;PermissionsBoundaryUsageCount&quot;: 0,</span>
<span class="go">          &quot;IsAttachable&quot;: true,</span>
<span class="go">          &quot;CreateDate&quot;: &quot;2025-01-01T18:47:43+00:00&quot;,</span>
<span class="go">          &quot;UpdateDate&quot;: &quot;2025-01-01T18:47:43+00:00&quot;</span>
<span class="go">      },</span>
<span class="go">      {</span>
<span class="go">          &quot;PolicyName&quot;: &quot;control-plane.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">          &quot;PolicyId&quot;: &quot;ANPA22CF4NNFY4FJ3DA2E&quot;,</span>
<span class="go">          &quot;Arn&quot;: &quot;arn:aws:iam::743175908171:policy/control-plane.cluster-api-provider-aws.sigs.k8s.io&quot;,</span>
<span class="go">          &quot;Path&quot;: &quot;/&quot;,</span>
<span class="go">          &quot;DefaultVersionId&quot;: &quot;v1&quot;,</span>
<span class="go">          &quot;AttachmentCount&quot;: 2,</span>
<span class="go">          &quot;PermissionsBoundaryUsageCount&quot;: 0,</span>
<span class="go">          &quot;IsAttachable&quot;: true,</span>
<span class="go">          &quot;CreateDate&quot;: &quot;2025-01-01T18:47:43+00:00&quot;,</span>
<span class="go">          &quot;UpdateDate&quot;: &quot;2025-01-01T18:47:43+00:00&quot;</span>
<span class="go">      }</span>
<span class="go">  ]</span>
<span class="go">}</span>
</code></pre></div></p>
<p>Now you can add the policies using the <code>attach-user-policy</code> command and the ARNs you retrieved in the previous step:</p>
<div class="highlight"><pre><span></span><code>aws<span class="w"> </span>iam<span class="w"> </span>attach-user-policy<span class="w"> </span>--user-name<span class="w"> </span>k0rdentQuickstart<span class="w"> </span>--policy-arn<span class="w"> </span>arn:aws:iam::743175908171:policy/controllers-eks.cluster-api-provider-aws.sigs.k8s.io
aws<span class="w"> </span>iam<span class="w"> </span>attach-user-policy<span class="w"> </span>--user-name<span class="w"> </span>k0rdentQuickstart<span class="w"> </span>--policy-arn<span class="w"> </span>arn:aws:iam::743175908171:policy/controllers.cluster-api-provider-aws.sigs.k8s.io
aws<span class="w"> </span>iam<span class="w"> </span>attach-user-policy<span class="w"> </span>--user-name<span class="w"> </span>k0rdentQuickstart<span class="w"> </span>--policy-arn<span class="w"> </span>arn:aws:iam::743175908171:policy/control-plane.cluster-api-provider-aws.sigs.k8s.io
</code></pre></div>
</li>
<li>
<p>Create an access key and secret</p>
<p>To access AWS as this new user, you'll need to create an access key:</p>
<p><div class="highlight"><pre><span></span><code>aws<span class="w"> </span>iam<span class="w"> </span>create-access-key<span class="w"> </span>--user-name<span class="w"> </span>k0rdentQuickstart<span class="w"> </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">{</span>
<span class="go">  &quot;AccessKey&quot;: {</span>
<span class="go">      &quot;UserName&quot;: &quot;k0rdentQuickstart&quot;,</span>
<span class="go">      &quot;AccessKeyId&quot;: &quot;AKIA2XXXXXXXXXXXXXXX&quot;,</span>
<span class="go">      &quot;Status&quot;: &quot;Active&quot;,</span>
<span class="go">      &quot;SecretAccessKey&quot;: &quot;nWtQIsXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;,</span>
<span class="go">      &quot;CreateDate&quot;: &quot;2025-01-18T08:33:35+00:00&quot;</span>
<span class="go">  }</span>
<span class="go">}</span>
</code></pre></div></p>
</li>
<li>
<p>Create the IAM Credentials Secret on the k0rdent Management Cluster</p>
<p>Create a YAML file called aws-cluster-identity-secret.yaml and add the following text, including the <code>AccessKeyId</code> and <code>SecretAccessKey</code> you created in the previous step:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-cluster-identity-secret</span>
<span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Opaque</span>
<span class="nt">stringData</span><span class="p">:</span>
<span class="nt">AccessKeyID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EXAMPLE_ACCESS_KEY_ID</span>
<span class="nt">SecretAccessKey</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EXAMPLE_SECRET_ACCESS_KEY</span>
</code></pre></div>
<p>Apply the YAML to your cluster, making sure to add it to the namespace where the CAPA provider is running (currently kcm-system) so the controller can read it:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>aws-cluster-identity-secret.yaml<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
</li>
<li>
<p>Create the <code>AWSClusterStaticIdentity</code></p>
<p>Create the <code>AWSClusterStaticIdentity</code> object in a file named aws-cluster-identity.yaml:</p>
<div class="highlight"><pre><span></span><code>kind:<span class="w"> </span>AWSClusterStaticIdentity
metadata:
name:<span class="w"> </span>aws-cluster-identity
spec:
secretRef:<span class="w"> </span>aws-cluster-identity-secret
allowedNamespaces:
<span class="w">  </span>selector:
<span class="w">    </span>matchLabels:<span class="w"> </span><span class="o">{}</span>
</code></pre></div>
<p>Notice that the <code>secretRef</code> references the <code>Secret</code> you created in the previous step.</p>
<p>Apply the YAML to your cluster, again adding it to the <code>kcm-system</code> namespace.</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>aws-cluster-identity.yaml<span class="w">  </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
</li>
<li>
<p>Create the <code>Credential</code></p>
<p>Finally, create the kcm <code>Credential</code> object, making sure to reference the <code>AWSClusterStaticIdentity</code> you just created:</p>
<p><div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Credential</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-cluster-identity-cred</span>
<span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Credential</span><span class="nv"> </span><span class="s">Example&quot;</span>
<span class="nt">identityRef</span><span class="p">:</span>
<span class="w">  </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta2</span>
<span class="w">  </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWSClusterStaticIdentity</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-cluster-identity</span>
</code></pre></div>
Apply the YAML to your cluster, again keeping it in the <code>kcm-system</code> namespace:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>aws-cluster-identity-cred.yaml<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
</li>
<li>
<p>Deploy a cluster</p>
<p>Make sure everything is configured properly by creating a <code>ClusterDeployment</code>. Start with a YAML file specifying the <code>ClusterDeployment</code>, as in:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterDeployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-aws-clusterdeployment1</span>
<span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-standalone-cp-0-0-5</span>
<span class="nt">credential</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aws-cluster-identity-cred</span>
<span class="nt">config</span><span class="p">:</span>
<span class="w">  </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-east-2</span>
<span class="w">  </span><span class="nt">controlPlane</span><span class="p">:</span>
<span class="w">    </span><span class="nt">instanceType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">t3.small</span>
<span class="w">  </span><span class="nt">worker</span><span class="p">:</span>
<span class="w">    </span><span class="nt">instanceType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">t3.small</span>
</code></pre></div>
<p>A couple of things to notice:
- You're giving it an arbitrary name (my-aws-clusterdeployment1)
- You're referencing the credential you created in the previous step. This enables you to set up a system where users can take advantage of having access to the credentials to the AWS account without actually having those credentials in hand.
- You need to choose a template to use for the cluster. You can get a list of available templates using:
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>clustertemplate<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAMESPACE    NAME                            VALID</span>
<span class="go">kcm-system   adopted-cluster-0-0-2           true</span>
<span class="go">kcm-system   aws-eks-0-0-3                   true</span>
<span class="go">kcm-system   aws-hosted-cp-0-0-4             true</span>
<span class="go">kcm-system   aws-standalone-cp-0-0-5         true</span>
<span class="go">kcm-system   azure-aks-0-0-2                 true</span>
<span class="go">kcm-system   azure-hosted-cp-0-0-4           true</span>
<span class="go">kcm-system   azure-standalone-cp-0-0-5       true</span>
<span class="go">kcm-system   openstack-standalone-cp-0-0-2   true</span>
<span class="go">kcm-system   vsphere-hosted-cp-0-0-5         true</span>
<span class="go">kcm-system   vsphere-standalone-cp-0-0-5     true</span>
</code></pre></div></p>
<p>Apply the YAML to your management cluster:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>my-aws-clusterdeployment1.yaml
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">clusterdeployment.k0rdent.mirantis.com/my-aws-clusterdeployment1 created</span>
</code></pre></div>
As before, there will be a delay as the cluster finishes provisioning. Follow the provisioning process with:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>clusterdeployment.k0rdent.mirantis.com<span class="w"> </span>my-aws-clusterdeployment1<span class="w"> </span>--watch
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAME                        READY   STATUS</span>
<span class="go">my-aws-clusterdeployment1   True    ClusterDeployment is ready</span>
</code></pre></div></p>
<p>When the cluster is <code>Ready</code>, you can access it via the kubeconfig, as in:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>my-aws-clusterdeployment1-kubeconfig<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.value}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d<span class="w"> </span>&gt;<span class="w"> </span>my-aws-clusterdeployment1-kubeconfig.kubeconfig
<span class="nv">KUBECONFIG</span><span class="o">=</span><span class="s2">&quot;my-aws-clusterdeployment1-kubeconfig.kubeconfig&quot;</span><span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-A
</code></pre></div>
</li>
<li>
<p>Cleanup</p>
<p>When you've established that it's working properly. you can delete the managed cluster and its AWS objects:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>delete<span class="w"> </span>ClusterDeployment<span class="w"> </span>my-aws-clusterdeployment1<span class="w"> </span>
</code></pre></div>
</li>
</ol>
<h3 id="azure">Azure<a class="headerlink" href="#azure" title="Permanent link">#</a></h3>
<p>Standalone clusters can be deployed on Azure instances.</p>
<h4 id="software-prerequisites">Software prerequisites<a class="headerlink" href="#software-prerequisites" title="Permanent link">#</a></h4>
<p>Before using k0rdent to deploy managed Kubernetes clusters on Azure, make sure you have the following components installed and configured:</p>
<ol>
<li>
<p>Install k0rdent</p>
<p>Follow the instructions in [[[ add link ]]] Install k0rdent to create a management cluster with k0rdent running.</p>
</li>
<li>
<p>The Azure CLI</p>
<p>The Azure CLI (az) is required to interact with Azure resources. You can install it on Ubuntu as follows:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-sL<span class="w"> </span>https://aka.ms/InstallAzureCLIDeb<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>bash
</code></pre></div>
</li>
<li>
<p>Log in to Azure</p>
<p>Run the <code>az login</code> command to authenticate your session with Azure:</p>
<div class="highlight"><pre><span></span><code>az<span class="w"> </span>login
</code></pre></div>
</li>
<li>
<p>Register resource providers</p>
<p>In order for k0rdent to deploy and manage clusters, it needs to be able to work with Azure resources such as 
compute, network, and identity. Make sure the subscription you're using has the following resource providers registered:</p>
<ul>
<li><code>Microsoft.Compute</code></li>
<li><code>Microsoft.Network</code></li>
<li><code>Microsoft.ContainerService</code></li>
<li><code>Microsoft.ManagedIdentity</code></li>
<li><code>Microsoft.Authorization</code></li>
</ul>
<p>To register these providers, run the following commands in the Azure CLI:</p>
<div class="highlight"><pre><span></span><code>az<span class="w"> </span>provider<span class="w"> </span>register<span class="w"> </span>--namespace<span class="w"> </span>Microsoft.Compute
az<span class="w"> </span>provider<span class="w"> </span>register<span class="w"> </span>--namespace<span class="w"> </span>Microsoft.Network
az<span class="w"> </span>provider<span class="w"> </span>register<span class="w"> </span>--namespace<span class="w"> </span>Microsoft.ContainerService
az<span class="w"> </span>provider<span class="w"> </span>register<span class="w"> </span>--namespace<span class="w"> </span>Microsoft.ManagedIdentity
az<span class="w"> </span>provider<span class="w"> </span>register<span class="w"> </span>--namespace<span class="w"> </span>Microsoft.Authorization
</code></pre></div>
</li>
</ol>
<h4 id="credentials">Credentials<a class="headerlink" href="#credentials" title="Permanent link">#</a></h4>
<p>Creating a managed cluster requires a structure of credentials that link to user identities on the provider system without
exposing the actual username and password to users. You can find more information on k0rdent [[[ LINK TO CREDENTIALS FILE ]]] 
Credentials, but for Azure, this involves creating an <code>AzureClusterIdentity</code> and a 
Service Principal (SP) to let CAPZ (Cluster API Azure) communicate with the cloud provider. To Set up credentials, follow these steps:</p>
<ol>
<li>
<p>Find Your Subscription ID</p>
<p>Your Azure must have at least one subscription for you to use it with k0rdent, so if you're working with a new
account make sure to (create a new subscription with billing information)[] before you start.</p>
<p>To get the information you need, list all your Azure subscriptions:https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/initial-subscriptions</p>
<p><div class="highlight"><pre><span></span><code>az<span class="w"> </span>account<span class="w"> </span>list<span class="w"> </span>-o<span class="w"> </span>table
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">Name                     SubscriptionId                        TenantId</span>
<span class="go">-----------------------  -------------------------------------  --------------------------------</span>
<span class="go">My Azure Subscription    12345678-1234-5678-1234-567812345678  87654321-1234-5678-1234-12345678</span>
</code></pre></div></p>
<p>Make note of the <code>SubscriptionId</code> for the subscription you want to use.</p>
</li>
<li>
<p>Create a Service Principal (SP)</p>
<p>The Service Principal is like a password-protected user that CAPZ will use to manage resources on Azure.
Create the Service Principal, making sure to replace <subscription-id> with the <code>SubscriptionId</code> from step 1.</p>
<p><div class="highlight"><pre><span></span><code>az<span class="w"> </span>ad<span class="w"> </span>sp<span class="w"> </span>create-for-rbac<span class="w"> </span>--role<span class="w"> </span>contributor<span class="w"> </span>--scopes<span class="o">=</span><span class="s2">&quot;/subscriptions/&lt;subscription-id&gt;&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">{</span>
<span class="go">&quot;appId&quot;: &quot;12345678-7848-4ce6-9be9-a4b3eecca0ff&quot;,</span>
<span class="go">&quot;displayName&quot;: &quot;azure-cli-2024-10-24-17-36-47&quot;,</span>
<span class="go">&quot;password&quot;: &quot;12~34~I5zKrL5Kem2aXsXUw6tIig0M~3~1234567&quot;,</span>
<span class="go">&quot;tenant&quot;: &quot;12345678-959b-481f-b094-eb043a87570a&quot;</span>
<span class="go">}</span>
</code></pre></div>
Note that this information gives you access to your Azure account, so make sure to treat these strings 
like passwords. Do not share them or check them into a repository.</p>
</li>
<li>
<p>Use the password to create a Secret object</p>
<p>The <code>Secret</code> stores the <code>clientSecret</code> (password) from the Service Principal.
Save the <code>Secret</code> YAML in a file called azure-cluster-identity-secret.yaml:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure-cluster-identity-secret</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">stringData</span><span class="p">:</span>
<span class="w">  </span><span class="nt">clientSecret</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;password&gt;</span><span class="w"> </span><span class="c1"># Password retrieved from the Service Principal</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Opaque</span>
</code></pre></div>
<p>You can then apply the YAML to your cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>azure-cluster-identity-secret.yaml
</code></pre></div>
</li>
<li>
<p>Create the <code>AzureClusterIdentity</code> objects</p>
<p>The <code>AzureClusterIdentity</code> object defines the credentials CAPZ uses to manage Azure resources. 
It references the <code>Secret</code> you just created, so make sure that <code>.spec.clientSecret.name</code> matches 
the name of that <code>Secret</code>.</p>
<p>Save the following YAML into a file named azure-cluster-identity.yaml:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AzureClusterIdentity</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nt">clusterctl.cluster.x-k8s.io/move-hierarchy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure-cluster-identity</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">allowedNamespaces</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="w">  </span><span class="nt">clientID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;appId&gt;</span><span class="w"> </span><span class="c1"># The App ID retrieved from the Service Principal above in Step 2</span>
<span class="w">  </span><span class="nt">clientSecret</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure-cluster-identity-secret</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="w">  </span><span class="nt">tenantID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;tenant&gt;</span><span class="w"> </span><span class="c1"># The Tenant ID retrieved from the Service Principal above in Step 2</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServicePrincipal</span>
</code></pre></div>
<p>Apply the YAML to your cluster:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>azure-cluster-identity.yaml
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">azureclusteridentity.infrastructure.cluster.x-k8s.io/azure-cluster-identity created</span>
</code></pre></div></p>
</li>
<li>
<p>Create the k0rdent <code>Credential</code> Object</p>
<p>Create the YAML for the specification of the <code>Credential</code> and save it as azure-cluster-identity-cred.yaml.</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Credential</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure-cluster-identity-cred</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">identityRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AzureClusterIdentity</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure-cluster-identity</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
</code></pre></div>
<p>You're referencing the <code>AzureClusterIdentity</code> object you just created, so make sure that <code>.spec.name</code> matches 
<code>.metadata.name</code> of that object. Also, note that while the overall object's <code>kind</code> is <code>Credential</code>, the 
<code>.spec.identityRef.kind</code> must be <code>AzureClusterIdentity</code> to match that object.</p>
<p>Apply the YAML to your cluster:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>azure-cluster-identity-cred.yaml
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">credential.k0rdent.mirantis.com/azure-cluster-identity-cred created</span>
</code></pre></div></p>
</li>
</ol>
<p>Now you're ready to deploy the cluster.</p>
<h4 id="create-your-first-clusterdeployment">Create your first ClusterDeployment<a class="headerlink" href="#create-your-first-clusterdeployment" title="Permanent link">#</a></h4>
<p>To test the configuration, deploy a managed cluster by following these steps:</p>
<ol>
<li>
<p>Determine the region</p>
<p>First get a list of available locations/regions:</p>
<p><div class="highlight"><pre><span></span><code>az<span class="w"> </span>account<span class="w"> </span>list-locations<span class="w"> </span>-o<span class="w"> </span>table
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">DisplayName               Name                 RegionalDisplayName</span>
<span class="go">------------------------  -------------------  -------------------------------------</span>
<span class="go">East US                   eastus               (US) East US</span>
<span class="go">South Central US          southcentralus       (US) South Central US</span>
<span class="go">West US 2                 westus2              (US) West US 2</span>
<span class="go">West US 3                 westus3              (US) West US 3</span>
<span class="go">Australia East            australiaeast        (Asia Pacific) Australia East</span>
<span class="go"></span>
</code></pre></div></p>
<p>Make note of the location you want to use, such as <code>eastus</code>.</p>
</li>
<li>
<p>Create the cluster specification</p>
<p>To create a managed cluster, create a <code>ClusterDeployment</code> that references the appropriate template
as well as the location, credentials, and <code>subscriptionId</code>.</p>
<p>You can see the available templates by listing them:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>clustertemplate<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<p>Create the yaml:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterDeployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-azure-clusterdeployment1</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure-standalone-cp-0-0-5</span>
<span class="w">  </span><span class="nt">credential</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">azure-cluster-identity-cred</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="nt">location</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;westus&quot;</span><span class="w"> </span><span class="c1"># Select your desired Azure Location (find it via `az account list-locations -o table`)</span>
<span class="w">    </span><span class="nt">subscriptionID</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;subscription-id&gt;</span><span class="w"> </span><span class="c1"># Enter the Subscription ID used earlier</span>
<span class="w">    </span><span class="nt">controlPlane</span><span class="p">:</span>
<span class="w">      </span><span class="nt">vmSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard_A4_v2</span>
<span class="w">    </span><span class="nt">worker</span><span class="p">:</span>
<span class="w">      </span><span class="nt">vmSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard_A4_v2</span>
</code></pre></div>
<p>Apply the YAML to your management cluster:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>my-azure-clusterdeployment1.yaml
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">clusterdeployment.k0rdent.mirantis.com/my-azure-clusterdeployment1 created</span>
</code></pre></div></p>
<p>Note that although the <code>ClusterDeployment</code> object has been created, there will be a delay as actual Azure instances
are provisioned and added to the cluster. You can follow the provisioning process:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>clusterdeployment.k0rdent.mirantis.com<span class="w"> </span>my-azure-clusterdeployment1<span class="w"> </span>--watch
</code></pre></div>
<p>If the provisioning process continues for a more than a few minutes, check to make sure k0rdent isn't trying to
exceed your quotas. If you are near the top of your quotas, requesting an increase can "unstick" the provisioning process.</p>
<p>After the cluster is <code>Ready</code>, you can access it via the kubeconfig:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>my-azure-clusterdeployment1-kubeconfig<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.value}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d<span class="w"> </span>&gt;<span class="w"> </span>my-azure-clusterdeployment1-kubeconfig.kubeconfig
<span class="nv">KUBECONFIG</span><span class="o">=</span><span class="s2">&quot;my-azure-clusterdeployment1-kubeconfig.kubeconfig&quot;</span><span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-A
</code></pre></div>
</li>
</ol>
<h4 id="cleanup">Cleanup<a class="headerlink" href="#cleanup" title="Permanent link">#</a></h4>
<p>To clean up Azure resources, delete the managed cluster by deleting the <code>ClusterDeployment</code>:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>ClusterDeployments<span class="w"> </span>-A
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAMESPACE    NAME                          READY   STATUS</span>
<span class="go">kcm-system   my-azure-clusterdeployment1   True    ClusterDeployment is ready</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>delete<span class="w"> </span>ClusterDeployment<span class="w"> </span>my-azure-clusterdeployment1<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">clusterdeployment.k0rdent.mirantis.com &quot;my-azure-clusterdeployment1&quot; deleted</span>
</code></pre></div></p>
<h3 id="openstack">OpenStack<a class="headerlink" href="#openstack" title="Permanent link">#</a></h3>
<p>Much of the following includes the process of setting up credentials for OpenStack.
To better understand how k0rdent uses credentials, read the
<a href="../credential/main.md">Credential system</a>.</p>
<p>To configure and test k0rdent's ability to create OpenStack managed clusters, follow these steps:</p>
<ol>
<li>
<p>Install k0rdent</p>
<p>Follow the instructions in <a href="./">install k0rdent</a> to create a management cluster with k0rdent running.</p>
</li>
<li>
<p>OpenStack CLI (optional)</p>
<p>If you plan to access OpenStack directly, go ahead and 
<a href="https://docs.openstack.org/newton/user-guide/common/cli-install-openstack-command-line-clients.html">install the OpenStack CLI</a>.</p>
</li>
<li>
<p>Configure the OpenStack Application Credential</p>
<p>This credential should include:</p>
<ul>
<li><code>OS_AUTH_URL</code></li>
<li><code>OS_APPLICATION_CREDENTIAL_ID</code></li>
<li><code>OS_APPLICATION_CREDENTIAL_SECRET</code></li>
<li><code>OS_REGION_NAME</code></li>
<li><code>OS_INTERFACE</code></li>
<li><code>OS_IDENTITY_API_VERSION</code> (commonly <code>3</code>)</li>
<li><code>OS_AUTH_TYPE</code> (e.g., <code>v3applicationcredential</code>)</li>
</ul>
<p>While it's possible to use a username and password instead of the Application Credential--adjust your YAML accordingly--an 
Application Credential is strongly recommended because it limits scope and improves security over a raw username/password approach.</p>
</li>
<li>
<p>Create the OpenStack Credentials Secret</p>
<p>Create a Kubernetes Secret containing the <code>clouds.yaml</code> that defines your OpenStack environment, substituting real values
where appropriate. Save this as <code>openstack-cloud-config.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openstack-cloud-config</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">stringData</span><span class="p">:</span>
<span class="w">  </span><span class="nt">clouds.yaml</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">clouds:</span>
<span class="w">      </span><span class="no">openstack:</span>
<span class="w">        </span><span class="no">auth:</span>
<span class="w">          </span><span class="no">auth_url: &lt;OS_AUTH_URL&gt;</span>
<span class="w">          </span><span class="no">application_credential_id: &lt;OS_APPLICATION_CREDENTIAL_ID&gt;</span>
<span class="w">          </span><span class="no">application_credential_secret: &lt;OS_APPLICATION_CREDENTIAL_SECRET&gt;</span>
<span class="w">        </span><span class="no">region_name: &lt;OS_REGION_NAME&gt;</span>
<span class="w">        </span><span class="no">interface: &lt;OS_INTERFACE&gt;</span>
<span class="w">        </span><span class="no">identity_api_version: &lt;OS_IDENTITY_API_VERSION&gt;</span>
<span class="w">        </span><span class="no">auth_type: &lt;OS_AUTH_TYPE&gt;</span>
</code></pre></div>
<p>Apply the YAML to your cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>openstack-cloud-config.yaml
</code></pre></div>
</li>
<li>
<p>Create the k0rdent Credential Object</p>
<p>Next, define a Credential that references the Secret from the previous step.
Save this as <code>openstack-cluster-identity-cred.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Credential</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openstack-cluster-identity-cred</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;OpenStack</span><span class="nv"> </span><span class="s">credentials&quot;</span>
<span class="w">  </span><span class="nt">identityRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openstack-cloud-config</span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
</code></pre></div>
<p>Apply the YAML to your cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>openstack-cluster-identity-cred.yaml
</code></pre></div>
<p>Note that <code>.spec.identityRef.name</code> must match the <code>Secret</code> you created in the previous step, and 
<code>.spec.identityRef.namespace</code> must be the same as the <code>Secret</code>s namespace (<code>kcm-system</code>).</p>
</li>
<li>
<p>Create Your First Managed Cluster</p>
<p>To test the configuration, create YAML with the specification of your Managed Cluster and save it as
<code>my-openstack-cluster-deployment.yaml</code>.  Note that you can see the available templates by listing them:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>clustertemplate<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<p>Here is an example:</p>
<p><div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterDeployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-openstack-cluster-deployment</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openstack-standalone-cp-0-0-1</span>
<span class="w">  </span><span class="nt">credential</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openstack-cluster-identity-cred</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="nt">controlPlaneNumber</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">workersNumber</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">controlPlane</span><span class="p">:</span>
<span class="w">      </span><span class="nt">flavor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">m1.medium</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span>
<span class="w">        </span><span class="nt">filter</span><span class="p">:</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-22.04-x86_64</span>
<span class="w">    </span><span class="nt">worker</span><span class="p">:</span>
<span class="w">      </span><span class="nt">flavor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">m1.medium</span>
<span class="w">      </span><span class="nt">image</span><span class="p">:</span>
<span class="w">        </span><span class="nt">filter</span><span class="p">:</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-22.04-x86_64</span>
<span class="w">    </span><span class="nt">authURL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;OS_AUTH_URL&gt;</span>
</code></pre></div>
You can adjust <code>flavor</code>, <code>image</code> name, and <code>authURL</code> to match your OpenStack environment. For more information about the configuration options, see the <a href="../clustertemplates/openstack/template-parameters.md">OpenStack Template Parameters</a>.</p>
<p>Apply the YAML to your management cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>my-openstack-cluster-deployment.yaml
</code></pre></div>
<p>There will be a delay as the cluster finishes provisioning. You can follow the
provisioning process:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>clusterdeployment.k0rdent.mirantis.com<span class="w"> </span>my-openstack-cluster-deployment<span class="w"> </span>--watch
</code></pre></div>
<p>After the cluster is <code>Ready</code>, you can access it via the kubeconfig, just like any other Kubernetes cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>my-openstack-cluster-deployment-kubeconfig<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.value&gt;&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d<span class="w"> </span>&gt;<span class="w"> </span>my-openstack-cluster-deployment-kubeconfig.kubeconfig
<span class="nv">KUBECONFIG</span><span class="o">=</span><span class="s2">&quot;my-openstack-cluster-deployment-kubeconfig.kubeconfig&quot;</span><span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-A
</code></pre></div>
</li>
<li>
<p>Cleanup</p>
<p>To clean up OpenStack resources, delete the managed cluster by deleting the <code>ClusterDeployment</code>:</p>
<p><div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>ClusterDeployments<span class="w"> </span>-A
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">NAMESPACE    NAME                          READY   STATUS</span>
<span class="go">kcm-system   my-openstack-cluster-deployment   True    ClusterDeployment is ready</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>delete<span class="w"> </span>ClusterDeployment<span class="w"> </span>my-openstack-cluster-deployment<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="go">clusterdeployment.k0rdent.mirantis.com &quot;my-openstack-cluster-deployment&quot; deleted</span>
</code></pre></div></p>
</li>
</ol>
<h3 id="vsphere">VSphere<a class="headerlink" href="#vsphere" title="Permanent link">#</a></h3>
<p>Much of the following includes the process of setting up credentials for vSphere.
To better understand how k0rdent uses credentials, read the
<a href="../credential/main.md">Credential System</a>.</p>
<h4 id="prerequisites_2">Prerequisites<a class="headerlink" href="#prerequisites_2" title="Permanent link">#</a></h4>
<p>Make sure you have the following installed:</p>
<ol>
<li>
<p>A k0rdent management cluster</p>
<p>Follow the instructions in <a href="./">install k0rdent</a> to create a management cluster with k0rdent running.</p>
</li>
<li>
<p>The <code>kubectl</code> CLI, installed locally.</p>
</li>
<li>
<p>A vSphere instance version <code>6.7.0</code> or higher.</p>
</li>
<li>
<p><a href="#image-template">Image template</a>.</p>
</li>
<li>
<p><a href="#vsphere-network">vSphere network</a> with DHCP enabled.</p>
</li>
<li>
<p>vSphere account with appropriate privileges</p>
<p>To function properly, the user assigned to the vSphere Provider should be able
to manipulate vSphere resources. The user should have the following 
required privileges:</p>
<ul>
<li><code>Virtual machine</code>: Full permissions are required</li>
<li><code>Network</code>: <code>Assign network</code> is sufficient</li>
<li><code>Datastore</code>: The user should be able to manipulate virtual machine files and metadata</li>
</ul>
<p>In addition to that, specific CSI driver permissions are required. See
<a href="https://docs.vmware.com/en/VMware-vSphere-Container-Storage-Plug-in/2.0/vmware-vsphere-csp-getting-started/GUID-0AB6E692-AA47-4B6A-8CEA-38B754E16567.html">the official doc</a>
for more information on CSI-specific permissions.</p>
</li>
<li>
<p>Image template</p>
<p>You can use pre-built image templates from the
<a href="https://github.com/kubernetes-sigs/cluster-api-provider-vsphere/blob/main/README.md#kubernetes-versions-with-published-ovas">CAPV project</a>
or build your own.</p>
<p>When building your own image, make sure that VMware tools and cloud-init are
installed and properly configured.</p>
<p>You can follow the <a href="https://docs.vmware.com/en/VMware-Tools/11.0.0/com.vmware.vsphere.vmwaretools.doc/GUID-C48E1F14-240D-4DD1-8D4C-25B6EBE4BB0F.html">official open-vm-tools guide</a>
on how to correctly install VMware tools.</p>
<p>When setting up cloud-init, you can refer to the <a href="https://cloudinit.readthedocs.io/en/latest/index.html">official docs</a>
and specifically the <a href="https://cloudinit.readthedocs.io/en/latest/reference/datasources/vmware.html">VMware datasource docs</a>
for extended information regarding cloud-init on vSphere.</p>
</li>
<li>
<p>vSphere network</p>
<p>When creating a network, make sure that it has the DHCP service.</p>
<p>Also, ensure that part of your network is out of the DHCP range (for example, the network
<code>172.16.0.0/24</code> should have a DHCP range of <code>172.16.0.100-172.16.0.254</code> only) so that LoadBalancer services will not create any IP conflicts in the
network.</p>
</li>
</ol>
<h4 id="create-credentials">Create credentials<a class="headerlink" href="#create-credentials" title="Permanent link">#</a></h4>
<p>To enable k0rdent to access vSphere resources, create the appropriate credentials objects:</p>
<ol>
<li>
<p>Create a <code>Secret</code> Object with the username and password</p>
<p>The <code>Secret</code> stores the username and password for your vSphere instance. Save the <code>Secret</code> YAML in a file named <code>vsphere-cluster-identity-secret.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vsphere-cluster-identity-secret</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">stringData</span><span class="p">:</span>
<span class="w">  </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;user&gt;</span>
<span class="w">  </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;password&gt;</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Opaque</span>
</code></pre></div>
<p>Apply the YAML to your cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>vsphere-cluster-identity-secret.yaml
</code></pre></div>
</li>
<li>
<p>Create the <code>VSphereClusterIdentity</code> Object</p>
<p>The <code>VSphereClusterIdentity</code> object defines the credentials CAPV will use to manage vSphere resources.</p>
<p>Save the <code>VSphereClusterIdentity</code> YAML into a file named <code>vsphere-cluster-identity.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VSphereClusterIdentity</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vsphere-cluster-identity</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vsphere-cluster-identity-secret</span>
<span class="w">  </span><span class="nt">allowedNamespaces</span><span class="p">:</span>
<span class="w">    </span><span class="nt">selector</span><span class="p">:</span>
<span class="w">      </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</code></pre></div>
<p>The <code>VSpehereClusterIdentity</code> object references the <code>Secret</code> you created in the previous step, so <code>.spec.secretName</code> 
needs to match the <code>.metadata.name</code> for the <code>Secret</code>.</p>
<p>Apply the YAML to your cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>vsphere-cluster-identity.yaml
</code></pre></div>
</li>
<li>
<p>Create the <code>Credential</code> Object</p>
<p>Create a YAML with the specification of our credential and save it as
<code>vsphere-cluster-identity-cred.yaml</code></p>
<p><div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Credential</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vsphere-cluster-identity-cred</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">identityRef</span><span class="p">:</span>
<span class="w">    </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">infrastructure.cluster.x-k8s.io/v1beta1</span>
<span class="w">    </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VSphereClusterIdentity</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vsphere-cluster-identity</span>
</code></pre></div>
Again, <code>.spec.identityRef.name</code> must match the <code>.metadata.name</code> of the <code>VSphereClusterIdentity</code> object you just created.</p>
<p>Apply the YAML to your cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>vsphere-cluster-identity-cred.yaml
</code></pre></div>
</li>
</ol>
<h4 id="create-your-first-cluster-deployment">Create your first Cluster Deployment<a class="headerlink" href="#create-your-first-cluster-deployment" title="Permanent link">#</a></h4>
<p>Test the configuration by deploying a cluster. Create a YAML document with the specification of 
your Cluster Deployment and save it as <code>my-vsphere-clusterdeployment1.yaml</code>.</p>
<p>You can get a list of available templates:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>clustertemplate<span class="w"> </span>-A
</code></pre></div>
<p>Here is an example of a <code>ClusterDeployment</code> YAML file. Make sure the replace the placeholders with your
specific information:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ClusterDeployment</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-vsphere-clusterdeployment1</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-system</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vsphere-standalone-cp-0-0-5</span>
<span class="w">  </span><span class="nt">credential</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vsphere-cluster-identity-cred</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="nt">vsphere</span><span class="p">:</span>
<span class="w">      </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_SERVER&gt;</span>
<span class="w">      </span><span class="nt">thumbprint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_THUMBPRINT&gt;</span>
<span class="w">      </span><span class="nt">datacenter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_DATACENTER&gt;</span>
<span class="w">      </span><span class="nt">datastore</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_DATASTORE&gt;</span>
<span class="w">      </span><span class="nt">resourcePool</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_RESOURCEPOOL&gt;</span>
<span class="w">      </span><span class="nt">folder</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_FOLDER&gt;</span>
<span class="w">    </span><span class="nt">controlPlaneEndpointIP</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_CONTROL_PLANE_ENDPOINT&gt;</span>
<span class="w">    </span><span class="nt">controlPlane</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ssh</span><span class="p">:</span>
<span class="w">        </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu</span>
<span class="w">        </span><span class="nt">publicKey</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_SSH_KEY&gt;</span>
<span class="w">      </span><span class="nt">vmTemplate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_VM_TEMPLATE&gt;</span>
<span class="w">      </span><span class="nt">network</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_NETWORK&gt;</span>
<span class="w">    </span><span class="nt">worker</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ssh</span><span class="p">:</span>
<span class="w">        </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu</span>
<span class="w">        </span><span class="nt">publicKey</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_SSH_KEY&gt;</span>
<span class="w">      </span><span class="nt">vmTemplate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_VM_TEMPLATE&gt;</span>
<span class="w">      </span><span class="nt">network</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;VSPHERE_NETWORK&gt;</span>
</code></pre></div>
<p>For more information about the available configuration options, see the <a href="../clustertemplates/vsphere/template-parameters.md">vSphere Template Parameters</a>.</p>
<p>Apply the YAML to your management cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>my-vsphere-clusterdeployment1.yaml
</code></pre></div>
<p>There will be a delay as the cluster finishes provisioning. Follow the
provisioning process with the following command:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>clusterdeployment.k0rdent.mirantis.com<span class="w"> </span>my-vsphere-clusterdeployment1<span class="w"> </span>--watch
</code></pre></div>
<p>After the cluster is <code>Ready</code>, you can access it via the kubeconfig, like this:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>my-vsphere-clusterdeployment1-kubeconfig<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.value}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d<span class="w"> </span>&gt;<span class="w"> </span>my-vsphere-clusterdeployment1-kubeconfig.kubeconfig
<span class="nv">KUBECONFIG</span><span class="o">=</span><span class="s2">&quot;my-vsphere-clusterdeployment1-kubeconfig.kubeconfig&quot;</span><span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-A
</code></pre></div>
<p>To delete provisioned cluster and free consumed vSphere resources run:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>-n<span class="w"> </span>kcm-system<span class="w"> </span>delete<span class="w"> </span>cluster<span class="w"> </span>my-vsphere-clusterdeployment1
</code></pre></div>
<h2 id="finding-releases">Finding Releases<a class="headerlink" href="#finding-releases" title="Permanent link">#</a></h2>
<p>Releases are tagged in the GitHub repository and can be found <a href="https://github.com/k0rdent/kcm/tags">here</a>.</p>
<h2 id="extended-management-configuration">Extended Management Configuration<a class="headerlink" href="#extended-management-configuration" title="Permanent link">#</a></h2>
<p>k0rdent is deployed with the following default configuration, which may vary
depending on the release version:</p>
<p><div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0rdent.mirantis.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Management</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">providers</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">k0smotron</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster-api-provider-aws</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster-api-provider-azure</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster-api-provider-vsphere</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">projectsveltos</span>
<span class="nt">release</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kcm-0-0-7</span>
</code></pre></div>
To see what is included in a specific release, look at the <code>release.yaml</code> file in the tagged release.
For example, here is the <a href="https://github.com/k0rdent/kcm/releases/download/v0.0.7/release.yaml">v0.0.7 release.yaml</a>.</p>
<p>There are two options to override the default management configuration of k0rdent:</p>
<ol>
<li>
<p>Update the <code>Management</code> object after the k0rdent installation using <code>kubectl</code>:</p>
<p><code>kubectl --kubeconfig &lt;path-to-management-kubeconfig&gt; edit management</code></p>
</li>
<li>
<p>Deploy k0rdent skipping the default <code>Management</code> object creation and provide your
   own <code>Management</code> configuration:</p>
<ul>
<li>Create <code>management.yaml</code> file and configure core components and providers.</li>
<li>
<p>Specify <code>--create-management=false</code> controller argument and install k0rdent:
  If installing using <code>helm</code> add the following parameter to the <code>helm
  install</code> command:</p>
<p><code>--set="controller.createManagement=false"</code></p>
</li>
<li>
<p>Create the <code>kcm</code> <code>Management</code> object after the k0rdent installation:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>--kubeconfig<span class="w"> </span>&lt;path-to-management-kubeconfig&gt;<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>management.yaml
</code></pre></div>
</li>
</ol>
<h3 id="cleanup_1">Cleanup<a class="headerlink" href="#cleanup_1" title="Permanent link">#</a></h3>
<p>Before you delete the <code>Management</code> object, make sure that you've deleted all <code>ClusterDeployment</code>s,
as you won't be able to delete them afterwards.</p>
<ol>
<li>Remove the Management object:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="w">  </span>kubectl<span class="w"> </span>delete<span class="w"> </span>management<span class="w"> </span>kcm
</code></pre></div>
<ol>
<li>Remove the <code>kcm</code> Helm release:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>uninstall<span class="w"> </span>kcm<span class="w"> </span>-n<span class="w"> </span>kcm-system
</code></pre></div>
<ol>
<li>Remove the <code>kcm-system</code> namespace:</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="w">  </span>kubectl<span class="w"> </span>delete<span class="w"> </span>ns<span class="w"> </span>kcm-system
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 The k0rdent authors | Documentation distributed under <a href="https://creativecommons.org/licenses/by/4.0/legalcode.txt">CC-BY-4.0</a>.
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k0sproject/k0s" target="_blank" rel="noopener" title="k0s on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://x.com/k0sproject" target="_blank" rel="noopener" title="k0s on X" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://medium.com/k0sproject" target="_blank" rel="noopener" title="k0s on Medium" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M180.5 74.262C80.813 74.262 0 155.633 0 256s80.819 181.738 180.5 181.738S361 356.373 361 256 280.191 74.262 180.5 74.262m288.25 10.646c-49.845 0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559c0-94.503-40.4-171.095-90.248-171.095Zm139.506 17.821c-17.526 0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271Z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://kubernetes.slack.com/archives/C07VAPJUECS" target="_blank" rel="noopener" title="k0s on the k8s slack" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1s21.16-47.06 47.06-47.06h47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06S448 171 448 196.9s-21.16 47.06-47.06 47.06h-47.06zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06S309 480 283.1 480s-47.06-21.16-47.06-47.06v-47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06s21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://k0sproject.io/" target="_blank" rel="noopener" title="k0s Website" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6 31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5 50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5l112.2-112.3c31.5-31.5 82.5-31.5 114 0 27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["toc.autohide", "search.suggest", "search.highlight", "content.code.copy"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>